# Selenium + TestNG POM Framework

A lightweight, parallel-ready UI automation framework in Java using Selenium + TestNG with a clean Page Object Model (POM). Includes utilities for waits, Excel data, HTML reporting (Extent), screenshots on failure, and secure config via environment variables / `.env`.

---

## ‚úÖ Prerequisites

* **Java 17+** (`java -version`)
* **Maven 3.9+** (`mvn -version`)
* **Git** (optional)
* Google **Chrome** installed (CI uses headless Chrome)

---

## üì¶ Project Structure (Mentioned Framework Layout)

```
selenium-testng-framework/
‚îú‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ testng.xml
‚îú‚îÄ‚îÄ .env                       # local-only (gitignored)
‚îú‚îÄ‚îÄ .gitignore
‚îÇ
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îú‚îÄ‚îÄ main
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ java
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ framework
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ core/               # Core driver & base page
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ BasePage.java
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ DriverFactory.java
‚îÇ   ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ DriverManager.java
‚îÇ   ‚îÇ           ‚îÇ
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ util/               # Utilities
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ WaitUtils.java
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ SafeLog.java
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ ExcelUtil.java
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ ReportManager.java
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ TestListener.java
‚îÇ   ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ ScreenshotUtil.java
‚îÇ   ‚îÇ           ‚îÇ
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ pages/              # Page Objects (POM)
‚îÇ   ‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.java
‚îÇ   ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ DashboardPage.java
‚îÇ   ‚îÇ           ‚îÇ
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ config/             # Config loader
‚îÇ   ‚îÇ               ‚îî‚îÄ‚îÄ Config.java
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ test
‚îÇ       ‚îî‚îÄ‚îÄ java
‚îÇ           ‚îî‚îÄ‚îÄ framework
‚îÇ               ‚îî‚îÄ‚îÄ tests/              # TestNG tests
‚îÇ                   ‚îú‚îÄ‚îÄ BaseTest.java
‚îÇ                   ‚îú‚îÄ‚îÄ LoginTest.java
‚îÇ                   ‚îî‚îÄ‚îÄ DashboardTest.java
‚îÇ
‚îî‚îÄ‚îÄ src/test/resources/                 # Resources
    ‚îú‚îÄ‚îÄ log4j2.xml
    ‚îî‚îÄ‚îÄ testdata/
        ‚îú‚îÄ‚îÄ users.json
        ‚îî‚îÄ‚îÄ sample.xlsx
```

**Key points**

* **Parallel-safe:** ThreadLocal WebDriver via `DriverManager`.
* **POM:** All pages extend `BasePage` (waits, typing/clicking, secure typing, etc.).
* **Reporting:** Extent HTML report + screenshots on failure via `TestListener`.
* **Config:** `Config` reads System properties ‚Üí Env vars ‚Üí `.env` ‚Üí default.
* **Secrets:** Do **not** log raw secrets; use `SafeLog.mask()`.

---

## ‚öôÔ∏è Configure Environment

Create a local `.env` (do not commit):

```
BASE_URL=https://your-app-url
APP_USERNAME=your-user
APP_PASSWORD=your-password
HEADLESS=true
REMOTE_URL=
```

> CI (GitHub Actions) should set these as **repository secrets** instead of `.env`.

---

## ‚ñ∂Ô∏è Run Tests (Maven commands)

### Run the suite (parallel by class)

```bash
mvn clean test -Dsurefire.suiteXmlFiles=testng.xml
```

### Override properties at runtime

```bash
mvn clean test -DHEADLESS=false -DBASE_URL=https://staging.myapp
```

### Run a single test class

```bash
mvn -Dtest=framework.tests.LoginTest test
```

### Run a single test method

```bash
mvn -Dtest=framework.tests.LoginTest#canLoginInParallel test
```

### Include/Exclude groups (if you add @Test(groups={...}))

```bash
mvn test -Dgroups=smoke
mvn test -DexcludedGroups=slow
```

### Run on Selenium Grid / Selenoid

```bash
mvn clean test -DREMOTE_URL=http://localhost:4444/wd/hub -DHEADLESS=true
```

### Set Chrome binary (rarely needed)

```bash
mvn test -Dwebdriver.chrome.driver=/path/to/chromedriver
```

---

## üß™ TestNG Suite (Parallel)

`testng.xml` is already configured to run classes in parallel and register the listener:

```xml
<!DOCTYPE suite SYSTEM "https://testng.org/testng-1.0.dtd" >
<suite name="Selenium Suite" parallel="classes" thread-count="4">
  <listeners>
    <listener class-name="framework.util.TestListener"/>
  </listeners>
  <test name="UI Tests">
    <packages>
      <package name="framework.tests"/>
    </packages>
  </test>
</suite>
```

Increase `thread-count` carefully depending on app stability and environment capacity.

---

## üìä Reports & Artifacts

* **Extent HTML report:** `target/reports/ExtentReport.html`
* **Screenshots on failure:** `target/reports/screenshots/*.png`
* **Surefire reports:** `target/surefire-reports/`

Open `ExtentReport.html` after the run for a clean visual summary.

---

## ‚òÅÔ∏è GitHub Actions CI

Create `.github/workflows/ci.yml`:

```yaml
name: UI Tests

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    env:
      BASE_URL: ${{ secrets.BASE_URL }}
      APP_USERNAME: ${{ secrets.APP_USERNAME }}
      APP_PASSWORD: ${{ secrets.APP_PASSWORD }}
      HEADLESS: "true"

    steps:
      - uses: actions/checkout@v4

      - name: Set up Java 17
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: 17
          cache: maven

      - name: Set up Chrome
        uses: browser-actions/setup-chrome@v1

      - name: Run TestNG suite
        run: mvn -B -q clean test -Dsurefire.suiteXmlFiles=testng.xml -DHEADLESS=true

      - name: Upload Surefire reports
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: surefire-reports
          path: target/surefire-reports/**

      - name: Upload Extent report & screenshots
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: ui-test-reports
          path: |
            target/reports/**
            target/reports/ExtentReport.html
```

Set repository **Secrets**: `BASE_URL`, `APP_USERNAME`, `APP_PASSWORD`.

---

## üîÑ Data-Driven Example (ExcelUtil)

Place data in `src/test/resources/testdata/sample.xlsx` (sheet: `Users`, headers: `username`, `password`).

```java
@DataProvider(name = "users")
public Object[][] users() {
  var rows = ExcelUtil.readSheet("/testdata/sample.xlsx", "Users");
  return rows.stream()
      .map(m -> new Object[]{ m.get("username"), m.get("password") })
      .toArray(Object[][]::new);
}
```

---

## üß∞ Troubleshooting

* **Listener not found**: Ensure `framework.util.TestListener` exists under `src/main/java` and `testng.xml` has the correct FQCN.
* **Dotenv not loading**: `.env` is optional‚ÄîCI typically uses env vars. Confirm the dependency and run `mvn clean`.
* **Driver errors**: Ensure Chrome is installed. In CI, we install Chrome; locally, Selenium Manager fetches drivers automatically.
* **Parallel flakiness**: Avoid shared state; ensure unique test data per thread.

---

## üìú License

MIT (or your organization‚Äôs standard) ‚Äî update as needed.



Quick use

When you run

docker compose up -d


Docker will create four containers:
selenium-hub ‚Üí the central controller.
chrome ‚Üí a Chrome browser node.
firefox ‚Üí a Firefox browser node.
edge ‚Üí an Edge browser node (optional).
All these containers talk to each other automatically.


How they work together

The hub acts as the traffic controller.
Each node (Chrome/Firefox/Edge) registers itself to the hub.
Your test (via RemoteWebDriver) connects to the hub at localhost:4444/wd/hub.
The hub picks the right browser node (based on your BROWSER setting) and runs the test there.
The node sends results back to the hub, and your test sees it as if it were running locally.


RUN

Single browser (local or Grid):
Runs all tests on one browser (default = Chrome, from testng.xml):
Single browser (default profile)

        # Local Chrome
mvn clean test

        # Grid Firefox
           mvn clean test \
                  -DBROWSER=chrome \
                  -DHEADLESS=true \
                  -DREMOTE_URL=http://localhost:4444/wd/hub

Cross-browser (run all in one go)
Cross-browser (Chrome+Firefox+Edge)

# local drivers
mvn -Pcross clean test
# on Selenium Grid
mvn -Pcross clean test -DREMOTE_URL=http://localhost:4444/wd/hub




All test methods in parallel (same browser)
Parallel methods (same browser, many threads)

# local
mvn -Pparallel clean test -DBROWSER=chrome
# on Grid (scale nodes to >= thread-count)
mvn -Pparallel clean test -DBROWSER=chrome -DREMOTE_URL=http://localhost:4444/wd/hub

